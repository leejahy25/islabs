# Lab #1,22110032, Le Gia Huy, INSE330380_01FIE
# Task 1: Transfer files between computers
**Question 1**: 
Conduct transfering a single plaintext file between 2 computers, 
Using openssl to implementing measures manually to ensure file integerity and authenticity at sending side, 
then veryfing at receiving side. 

**Answer**:
## 1. Set up 2 virtual machines:
- Start Docker Desktop, run cmd as administrator and download `ubuntu` image

```
docker pull ubuntu
```

- Create containers from `ubuntu` image on 2 cmd

```
docker run -it --name vm1 ubuntu
```

```
docker run -it --name vm2 ubuntu
```

The above commands create 2 containers named `vm1` and `vm2`

- Check the containers

```
docker ps
```

![](https://github.com/leejahy25/islabs/blob/b18c8747717d0af72f19f5f9fcb5c4950eb9fb0b/img/task1_1.jpg)

## 2. Install necessary packages on virtual machines
Run these commands to install packages

```
apt update
```

- Check and update packages

```
apt install openssl
```

- Install openssl

```
apt install netcat-traditional
```

- Install netcat to conduct transfering

```
apt install net-tools
```

- Necessary package to use `ifconfig` to get ip of the 2 machines

## 3. Generate an HMAC on the Sending Side (vm1)
- First, create a text file name `plaintext.txt`

```
echo "Transfer files between computers" > plaintext.txt
```

- Generate a secret key

```
openssl rand -hex 32 > secret.key
```

The `secret.key` file will be used by both VM1 and VM2 for HMAC generation and verification.

- Create the HMAC for the plaintext file

```
openssl dgst -sha256 -hmac $(cat secret.key) plaintext.txt > plaintext.txt.hmac
```

This generates an HMAC in the file `plaintext.txt.hmac` for the plaintext file `plaintext.txt`.

## 4. Conduct transfering
- Send both the plaintext file and the HMAC to the receiving side using `netcat`

On vm1

```
tar -cf - plaintext.txt plaintext.txt.hmac | nc -l -p 1234
```

On vm2

```
nc 172.17.0.2 1234 | tar -xf -
```

- The `1234` is a port choose by me

- The `172.17.0.2` is the sender's (vm1) ip

## 5. Verify the HMAC on the Receiving Side (vm2)
- Copy the `secret.key` securely to `vm2`

- Generate the HMAC for the received `plaintext.txt` using the shared key

```
openssl dgst -sha256 -hmac $(cat secret.key) plaintext.txt > received_plaintext.hmac
```

- Compare the HMACs

```
diff plaintext.txt.hmac received_plaintext.hmac
```

=> No output => the HMACs match => confirming both integrity and authenticity

# Task 2: Transfering encrypted file and decrypt it with hybrid encryption. 
**Question 1**:
Conduct transfering a file (deliberately choosen by you) between 2 computers. 
The file is symmetrically encrypted/decrypted by exchanging secret key which is encrypted using RSA. 
All steps are made manually with openssl at the terminal of each computer.

**Answer**:


# Task 3: Firewall configuration
**Question 1**:
From VMs of previous tasks, install iptables and configure one of the 2 VMs as a web and ssh server. Demonstrate your ability to block/unblock http, icmp, ssh requests from the other host.

**Answer**:
